@model RestaurantViewModel
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

@{
    ViewData["Title"] = "Ресторан";
}

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="lib\lightbox2-dev\dist\js\lightbox.js"></script>
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="~/css/shrift1.css">
<link rel="stylesheet" type="text/css" href="~/css/shrift2.css">


<style>
    body {
        background: #fef7af
    }

    .stroke {
        text-shadow: black 3px 3px 0, black -3px -3px 0, black -3px 3px 0, black 3px -3px 0;
    }
</style>

<title>Платформа ресторанов</title>


    <form asp-action="AddComment" method="get">
        <div class="text-center">
            @if (Model != null)
            {
                var item = Model;

                <h1 class="display-4">@item.Name</h1>
                <p class="font-italic"> Адрес: @item.Address </p>
                <p class="font-italic"> Описание: @item.Description </p>
                <p class="font-italic"> Email: @item.Email </p>
                <p class="font-italic"> Телефон: @item.Phone </p>
                <p></p>
                <div class="row">
                    <div class="col-md-6">
                        <h2 class = "display-4">Меню</h2>
                        @foreach (var d in @item.Dishes)
                        {
                            <h4>Название: @d.NameDish </h4>
                            <p>Описание: @d.Composition </p>
                            <p>Время готовки: @d.CookingTime минут</p>
                        }
                    </div>
                    <div class="col-md-6">
                        <h2 class="display-4">Столики</h2>
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var d in @item.TableRestaurants)
                                {
                                    <tr>
                                        
                                        <td>
                                            <h5>@d.NumberTable </h5>

                                        </td>
                                        <td><p>@d.Status </p></td>

                                    </tr>
                                   }
                            </tbody>
                        </table>
                        </div>

                        <div class="col-md-6">
                            <h2 class="text-right, display-4">Комментарии</h2>
                            @foreach (var e in @item.Comments)
                            {
                                <p class="text-right">Имя: @e.Employee.FullName </p>
                                <p class="text-right">Дата отзыва: @e.DateComment </p>
                                <p class="text-right">Оценка: @e.Point </p>
                                <p class="text-right">@e.DataComment </p>
                            }
                            
                        </div>
                        <div class="col-md-6">
                            @if (SignInManager.IsSignedIn(User))
                            {
                                <a href="/Restaurants/AddComment/@item.Id"><h2 class="display-4">Оставить отзыв</h2></a>
                                <a href="/Restaurants/AddReserve/@item.Id"><h2 class="display-4">Забронировать столик</h2></a>
                                                }
                        </div>
                    </div>
                    }

                </div>
</form>